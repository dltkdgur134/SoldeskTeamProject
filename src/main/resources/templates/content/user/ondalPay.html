<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/Layouts}">
<head>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.4/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link th:href="@{/css/Custom.css}" rel="stylesheet" />
<link th:href="@{/css/update.css}" rel="stylesheet" />
<link th:href="@{/css/user/ondalPay.css}" rel="stylesheet" />
</head>
<div layout:fragment="content" class="container py-5">
	<div th:if="${success}" class="alert alert-success"
		th:text="${success}"></div>
	<div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
	<div class="card info-card p-4">
		<h3 class="mb-4">온달 지갑</h3>
		<!-- 현재 잔액 -->
		<div class="mb-3">
			<label class="form-label">현재 잔액</label>
			<div class="form-control-plaintext fw-bold fs-5 text-primary">
				<span th:text="${#numbers.formatInteger(ondalWallet, 0, 'COMMA')}"></span>
				원
			</div>
		</div>
		<h3 class="mb-4">온달 페이</h3>
		<!-- 현재 잔액 -->
		<div class="mb-3">
			<label class="form-label">현재 잔액</label>
			<div class="form-control-plaintext fw-bold fs-5 text-primary">
				<span th:text="${#numbers.formatInteger(ondalPay, 0, 'COMMA')}"></span>
				원
			</div>
		</div>


	</div>
	<div class="card info-card p-4">
		<form th:action="@{/user/buyOndalPay}" method="post">
			<div class="d-flex justify-content-center flex-wrap">

				<div class="mt-4">
					<label class="pay-option o-pay-option"> <input type="radio"
						name="amount" value="5000" /> <img src="/css/imgs/o-pay.png"
						alt="5,000 O Pay" />
						<div class="pay-label">5,000원</div>
					</label>
				</div>

				<div class="mt-4">
					<label class="pay-option o-pay-option"> <input type="radio"
						name="amount" value="10000" /> <img src="/css/imgs/o-pay.png"
						alt="10,000 O Pay" />
						<div class="pay-label">10,000원</div>
					</label>
				</div>

				<div class="mt-4">
					<label class="pay-option o-pay-option"> <input type="radio"
						name="amount" value="30000" /> <img src="/css/imgs/o-pay.png"
						alt="30,000 O Pay" />
						<div class="pay-label">30,000원</div>
					</label>
				</div>

				<div class="mt-4">
					<label class="pay-option o-pay-option"> <input type="radio"
						name="amount" value="50000" /> <img src="/css/imgs/o-pay.png"
						alt="50,000 O Pay" />
						<div class="pay-label">50,000원</div>
					</label>
				</div>
			</div>
			<div class="mt-4">
				<label for="Password" class="form-label">비밀번호</label> <input
					type="password" class="form-control" id="Password" name="Password" />
			</div>
			<div class="mt-4">
				<button type="submit" class="btn btn-warning mt-3">O Pay 충전</button>
			</div>
		</form>
	</div>
</div>

<script>
  // 클릭 시 이미지 선택되게 input 과 연결
  document.querySelectorAll('.o-pay-option').forEach(label => {
    label.addEventListener('click', () => {
      const allInputs = document.querySelectorAll('.o-pay-option input');
      allInputs.forEach(input => input.checked = false); // 중복방지
      label.querySelector('input').checked = true;
    });
  });
</script>
</html>
